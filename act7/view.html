<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Game of Thrones API</title>
    <link rel="icon" href="../Logo.png">
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<style>
    .viewContents {
        background-image: url("assets/gotBg.jpg");
        background-repeat: no-repeat;
        background-position: center;
        background-size: cover;
        height: 100vh;

    }

    .characterName {
        font-family: "Cinzel Decorative", serif;
        font-weight: 400;
        font-style: normal;

    }

    body {
        font-family: "Poppins", serif;
        font-weight: 400;
        font-style: normal;
    }
</style>

<body id="body" data-bs-theme="dark">
    <div class="container-fluid viewContents p-0" id="viewTitle">
        <div class="container-fluid p-0">
            <nav class="navbar navbar-expand-lg bg-body-tertiary shadow" data-bs-theme="dark">
                <div class="container-fluid">
                    <img src="assets/gotLogo2.png" style="width: 190px; height: 65px; padding-left: 10px;" />
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav mx-auto">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" href="index.html">HOME</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">PROJECTS</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">ABOUT</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <div class="container viewTitle d-flex align-items-end" style="height:90vh">
            <div class="row">
                <div class="col">
                    <p class="characterName fw-bold text-center display-1">
                        Meet <span id="fullName"></span>
                    </p>
                    <p class="lead text-center fs-5">
                        Meet one of the iconic characters from Game of Thrones! Discover their full name, title,
                        family background, and explore more of their rich history in Westeros.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="container mt-5">
        <div class="row viewInfo">
            <div class="col-12 col-md-4 col-lg-6 mt-5">
                <div class="card rounded-5">
                    <div class="py-3 px-4"><b>Name: </b><span id="charName"></span></div>
                    <div class="py-3 px-4"><b>Family: </b><span id="family"></span></div>
                    <div class="py-3 px-4"><b>Title: </b><span id="title"></span></div>
                    <div class="py-3 px-4"><b>ID: </b><span id="id"></span></div>
                </div>
            </div>
            <div class="col-12 col-md-8 col-lg-6">
                <div class="card rounded-5 my-5" id="imgContainer"
                    style="display: flex; justify-content: center; align-items: center;">
                    <img class="py-5" id="img" src="" style=" width: 70%; height: 80%; object-fit: contain;">
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script>
        var fullName = document.getElementById("fullName");
        var img = document.getElementById("img");
        var family = document.getElementById("family");
        var title = document.getElementById("title");
        var id = document.getElementById("id");
        var charName = document.getElementById('charName');

        const loadGOT = async (searchTerm) => {
            const response = await fetch('https://thronesapi.com/api/v2/Characters/' + searchTerm);
            const got = await response.json();

            fullName.innerHTML = got.fullName;
            img.src = got.imageUrl;
            family.innerHTML = got.family;
            title.innerHTML = got.title;
            id.innerHTML = got.id;
            charName.innerHTML = got.fullName;
        }

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);

        if (urlParams.has('characterName')) {
            loadGOT(urlParams.get('characterName'));
        } else {
            document.getElementById("fullName").innerHTML = "No data to show";
        }
    </script>

</body>

</html>